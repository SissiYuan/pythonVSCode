# Overview:
# Generic jobs template to compile and build extension

jobs:
  - job: Extension
    pool:
      vmImage: 'ubuntu-16.04'
    steps:
      - template: ../steps/initialization.yml
        parameters:
          PythonVersion: $(PythonVersion)
          workingDirectory: $(Build.SourcesDirectory)
          compile: 'false'
          installVSCEorNPX: 'false'

      - task: Gulp@0
        displayName: 'Compile and check for errors'
        inputs:
          targets: 'compile'

  - job: IPyWidgets
    pool:
      vmImage: 'ubuntu-16.04'
    steps:
      - template: ../steps/initialization.yml
        parameters:
          PythonVersion: $(PythonVersion)
          workingDirectory: $(Build.SourcesDirectory)
          compile: 'false'
          installVSCEorNPX: 'false'

      - task: Gulp@0
        displayName: 'Compile and check for errors'
        inputs:
          targets: 'compile-ipywidgets'

  - job: Notebbooks
    pool:
      vmImage: 'ubuntu-16.04'
    steps:
      - template: ../steps/initialization.yml
        parameters:
          PythonVersion: $(PythonVersion)
          workingDirectory: $(Build.SourcesDirectory)
          compile: 'false'
          installVSCEorNPX: 'false'

      - task: Gulp@0
        displayName: 'Compile and check for errors'
        inputs:
          targets: 'compile-notebooks'

  - job: Viewers
    pool:
      vmImage: 'ubuntu-16.04'
    steps:
      - template: ../steps/initialization.yml
        parameters:
          PythonVersion: $(PythonVersion)
          workingDirectory: $(Build.SourcesDirectory)
          compile: 'false'
          installVSCEorNPX: 'false'

      - task: Gulp@0
        displayName: 'Compile and check for errors'
        inputs:
          targets: 'compile-viewers'
